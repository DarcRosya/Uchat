/*
 * ============================================================================
 * ENTITY MODEL: MESSAGE (–°–æ–æ–±—â–µ–Ω–∏–µ)
 * ============================================================================
 * 
 * –≠—Ç–æ –º–æ–¥–µ–ª—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π - –∫–∞–∫ –ª–∏—á–Ω—ã—Ö, —Ç–∞–∫ –∏ –≤ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–∞—Ö.
 * 
 * –í–ê–ñ–ù–ê–Ø –ö–û–ù–¶–ï–ü–¶–ò–Ø:
 * –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –û–î–ù–£ —Ç–∞–±–ª–∏—Ü—É –¥–ª—è –¥–≤—É—Ö —Ç–∏–ø–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π:
 * 
 * 1. –õ–ò–ß–ù–´–ï —Å–æ–æ–±—â–µ–Ω–∏—è: 
 *    - SenderId –∑–∞–ø–æ–ª–Ω–µ–Ω (–∫—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏–ª)
 *    - ReceiverId –∑–∞–ø–æ–ª–Ω–µ–Ω (–∫–æ–º—É –æ—Ç–ø—Ä–∞–≤–∏–ª)
 *    - ChatRoomId = NULL
 * 
 * 2. –ì–†–£–ü–ü–û–í–´–ï —Å–æ–æ–±—â–µ–Ω–∏—è:
 *    - SenderId –∑–∞–ø–æ–ª–Ω–µ–Ω (–∫—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏–ª)
 *    - ReceiverId = NULL
 *    - ChatRoomId –∑–∞–ø–æ–ª–Ω–µ–Ω (–≤ –∫–∞–∫—É—é –≥—Ä—É–ø–ø—É)
 * 
 * –≠—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è "polymorphic association" - –æ–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤.
 * 
 * ============================================================================
 */

namespace Uchat.Database.Entities;

/// <summary>
/// –ú–æ–¥–µ–ª—å —Å–æ–æ–±—â–µ–Ω–∏—è (–ª–∏—á–Ω–æ–≥–æ –∏–ª–∏ –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ)
/// –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–∞–±–ª–∏—Ü—É Messages –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
/// </summary>
public class Message
{
    // ========================================================================
    // PRIMARY KEY
    // ========================================================================
    
    /// <summary>
    /// –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID —Å–æ–æ–±—â–µ–Ω–∏—è
    /// –í –ë–î: INTEGER PRIMARY KEY AUTOINCREMENT
    /// </summary>
    public int Id { get; set; }
    
    // ========================================================================
    // FOREIGN KEYS (–°–≤—è–∑–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏)
    // ========================================================================
    
    /// <summary>
    /// ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π –û–¢–ü–†–ê–í–ò–õ —Å–æ–æ–±—â–µ–Ω–∏–µ
    /// Foreign Key -> Users.Id
    /// –í –ë–î: INTEGER NOT NULL
    /// 
    /// –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û–ï –ü–û–õ–ï - –∫–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–º–µ–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
    /// </summary>
    public int SenderId { get; set; }
    
    /// <summary>
    /// ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π –ü–û–õ–£–ß–ò–õ —Å–æ–æ–±—â–µ–Ω–∏–µ (–¥–ª—è –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π)
    /// Foreign Key -> Users.Id
    /// –í –ë–î: INTEGER NULL
    /// 
    /// int? –æ–∑–Ω–∞—á–∞–µ—Ç nullable - –º–æ–∂–µ—Ç –±—ã—Ç—å NULL
    /// NULL = —Å–æ–æ–±—â–µ–Ω–∏–µ –≥—Ä—É–ø–ø–æ–≤–æ–µ, –Ω–µ –ª–∏—á–Ω–æ–µ
    /// </summary>
    public int? ReceiverId { get; set; }
    
    /// <summary>
    /// ID –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ —á–∞—Ç–∞ (–¥–ª—è –≥—Ä—É–ø–ø–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π)
    /// Foreign Key -> ChatRooms.Id
    /// –í –ë–î: INTEGER NULL
    /// 
    /// NULL = —Å–æ–æ–±—â–µ–Ω–∏–µ –ª–∏—á–Ω–æ–µ, –Ω–µ –≥—Ä—É–ø–ø–æ–≤–æ–µ
    /// </summary>
    public int? ChatRoomId { get; set; }
    
    // ========================================================================
    // –°–û–î–ï–†–ñ–ò–ú–û–ï –°–û–û–ë–©–ï–ù–ò–Ø
    // ========================================================================
    
    /// <summary>
    /// –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
    /// –í –ë–î: VARCHAR(4000) NOT NULL
    /// 
    /// –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ 4000 —Å–∏–º–≤–æ–ª–æ–≤ - –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
    /// –î–ª—è –±–æ–ª–µ–µ –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TEXT
    /// </summary>
    public string Content { get; set; } = string.Empty;
    
    /// <summary>
    /// –¢–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è (—Ç–µ–∫—Å—Ç, –∫–∞—Ä—Ç–∏–Ω–∫–∞, —Ñ–∞–π–ª, –≥–æ–ª–æ—Å–æ–≤–æ–µ –∏ —Ç.–¥.)
    /// –í –ë–î: INTEGER NOT NULL
    /// 
    /// –≠—Ç–æ enum - —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–∞–∫ —á–∏—Å–ª–æ (0 = Text, 1 = Image, 2 = File...)
    /// </summary>
    public MessageType Type { get; set; }
    
    // ========================================================================
    // –í–õ–û–ñ–ï–ù–ò–Ø (Attachments) - –¥–ª—è —Ñ–∞–π–ª–æ–≤, –∫–∞—Ä—Ç–∏–Ω–æ–∫, –∞—É–¥–∏–æ
    // ========================================================================
    
    /// <summary>
    /// URL –∏–ª–∏ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –≤–ª–æ–∂–µ–Ω–∏—è
    /// –í –ë–î: VARCHAR(1000) NULL
    /// 
    /// –ü—Ä–∏–º–µ—Ä—ã:
    ///   - "/uploads/images/photo_123.jpg"
    ///   - "https://cdn.example.com/files/document.pdf"
    /// </summary>
    public string? AttachmentUrl { get; set; }
    
    /// <summary>
    /// –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞ (–¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è)
    /// –í –ë–î: VARCHAR(255) NULL
    /// 
    /// –ü—Ä–∏–º–µ—Ä: "–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è_2024.pptx"
    /// </summary>
    public string? AttachmentFileName { get; set; }
    
    /// <summary>
    /// –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –≤ –±–∞–π—Ç–∞—Ö
    /// –í –ë–î: BIGINT NULL
    /// 
    /// long? –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –±–æ–ª—å—à–∏–µ —á–∏—Å–ª–∞ (–¥–æ 9,223,372,036,854,775,807 –±–∞–π—Ç)
    /// –≠—Ç–æ –ø—Ä–∏–º–µ—Ä–Ω–æ 9 —ç–∫—Å–∞–±–∞–π—Ç :)
    /// </summary>
    public long? AttachmentFileSize { get; set; }
    
    // ========================================================================
    // –í–†–ï–ú–ï–ù–ù–´–ï –ú–ï–¢–ö–ò
    // ========================================================================
    
    /// <summary>
    /// –ö–æ–≥–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –±—ã–ª–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
    /// –í –ë–î: DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
    /// 
    /// –í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–π UTC:
    ///   SentAt = DateTime.UtcNow;
    /// </summary>
    public DateTime SentAt { get; set; }
    
    /// <summary>
    /// –ë—ã–ª–æ –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–æ –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
    /// –í –ë–î: BOOLEAN NOT NULL DEFAULT 0
    /// </summary>
    public bool IsEdited { get; set; }
    
    /// <summary>
    /// –ö–æ–≥–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –±—ã–ª–æ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑
    /// –í –ë–î: DATETIME NULL
    /// 
    /// NULL = —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–ª–æ—Å—å
    /// </summary>
    public DateTime? EditedAt { get; set; }
    
    // ========================================================================
    // SOFT DELETE (–ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ)
    // ========================================================================
    // –í–º–µ—Å—Ç–æ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è –∏–∑ –ë–î, –º—ã –ø–æ–º–µ—á–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–∞–∫ —É–¥–∞–ª–µ–Ω–Ω–æ–µ
    // –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –∏ —Ö—Ä–∞–Ω–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é
    // ========================================================================
    
    /// <summary>
    /// –£–¥–∞–ª–µ–Ω–æ –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ (soft delete)
    /// –í –ë–î: BOOLEAN NOT NULL DEFAULT 0
    /// 
    /// true = —Å–æ–æ–±—â–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–æ (–Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º)
    /// false = —Å–æ–æ–±—â–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ
    /// </summary>
    public bool IsDeleted { get; set; }
    
    /// <summary>
    /// –ö–æ–≥–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –±—ã–ª–æ —É–¥–∞–ª–µ–Ω–æ
    /// –í –ë–î: DATETIME NULL
    /// </summary>
    public DateTime? DeletedAt { get; set; }
    
    // ========================================================================
    // –°–¢–ê–¢–£–° –ü–†–û–ß–¢–ï–ù–ò–Ø (–¥–ª—è –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π)
    // ========================================================================
    
    /// <summary>
    /// –ü—Ä–æ—á–∏—Ç–∞–Ω–æ –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–º
    /// –í –ë–î: BOOLEAN NOT NULL DEFAULT 0
    /// 
    /// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
    /// - –ü–æ–∫–∞–∑–∞ "–Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π" (–∫—Ä–∞—Å–Ω—ã–π –∫—Ä—É–∂–æ–∫ —Å —Ü–∏—Ñ—Ä–æ–π)
    /// - –î–≤—É—Ö –≥–∞–ª–æ—á–µ–∫ –≤ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞—Ö (–æ–¥–Ω–∞ –≥–∞–ª–æ—á–∫–∞ = –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ, –¥–≤–µ = –ø—Ä–æ—á–∏—Ç–∞–Ω–æ)
    /// </summary>
    public bool IsRead { get; set; }
    
    /// <summary>
    /// –ö–æ–≥–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –±—ã–ª–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–æ
    /// –í –ë–î: DATETIME NULL
    /// </summary>
    public DateTime? ReadAt { get; set; }
    
    // ========================================================================
    // REPLIES (–û—Ç–≤–µ—Ç—ã –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è)
    // ========================================================================
    // Telegram-style "reply to message" - –º–æ–∂–Ω–æ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    // ========================================================================
    
    /// <summary>
    /// ID —Å–æ–æ–±—â–µ–Ω–∏—è, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–µ –º—ã –æ—Ç–≤–µ—á–∞–µ–º
    /// Foreign Key -> Messages.Id (self-referencing)
    /// –í –ë–î: INTEGER NULL
    /// 
    /// Self-referencing FK - —ç—Ç–æ –∫–æ–≥–¥–∞ —Ç–∞–±–ª–∏—Ü–∞ —Å—Å—ã–ª–∞–µ—Ç—Å—è —Å–∞–º–∞ –Ω–∞ —Å–µ–±—è!
    /// NULL = —ç—Ç–æ –Ω–µ –æ—Ç–≤–µ—Ç, –∞ –æ–±—ã—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    /// </summary>
    public int? ReplyToMessageId { get; set; }
    
    // ========================================================================
    // –ù–ê–í–ò–ì–ê–¶–ò–û–ù–ù–´–ï –°–í–û–ô–°–¢–í–ê
    // ========================================================================
    
    /// <summary>
    /// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–ø—Ä–∞–≤–∏–ª —Å–æ–æ–±—â–µ–Ω–∏–µ
    /// 
    /// Navigation property –¥–ª—è SenderId
    /// null! –æ–∑–Ω–∞—á–∞–µ—Ç "—ç—Ç–æ –Ω–µ –±—É–¥–µ—Ç null –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è"
    /// (–Ω–æ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä C# –Ω–µ –∑–Ω–∞–µ—Ç, —á—Ç–æ EF –∑–∞–ø–æ–ª–Ω–∏—Ç —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
    /// 
    /// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
    ///   var message = await context.Messages
    ///       .Include(m => m.Sender)  // –ó–∞–≥—Ä—É–∂–∞–µ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
    ///       .FirstAsync();
    ///   
    ///   Console.WriteLine($"–û—Ç: {message.Sender.Username}");
    /// </summary>
    public User Sender { get; set; } = null!;
    
    /// <summary>
    /// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—É—á–∏–ª —Å–æ–æ–±—â–µ–Ω–∏–µ (–¥–ª—è –ª–∏—á–Ω—ã—Ö)
    /// 
    /// Navigation property –¥–ª—è ReceiverId
    /// User? –º–æ–∂–µ—Ç –±—ã—Ç—å null (–¥–ª—è –≥—Ä—É–ø–ø–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π)
    /// </summary>
    public User? Receiver { get; set; }
    
    /// <summary>
    /// –ì—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç, –≤ –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ
    /// 
    /// Navigation property –¥–ª—è ChatRoomId
    /// ChatRoom? –º–æ–∂–µ—Ç –±—ã—Ç—å null (–¥–ª—è –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π)
    /// </summary>
    public ChatRoom? ChatRoom { get; set; }
    
    /// <summary>
    /// –°–æ–æ–±—â–µ–Ω–∏–µ, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–µ –º—ã –æ—Ç–≤–µ—á–∞–µ–º
    /// 
    /// Navigation property –¥–ª—è ReplyToMessageId
    /// Self-referencing relationship
    /// </summary>
    public Message? ReplyToMessage { get; set; }
    
    /// <summary>
    /// –í—Å–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≠–¢–û —Å–æ–æ–±—â–µ–Ω–∏–µ
    /// 
    /// –û–±—Ä–∞—Ç–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ —Å–≤—è–∑–∏ ReplyToMessage
    /// –ï—Å–ª–∏ –¥—Ä—É–≥–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ —ç—Ç–æ (ReplyToMessageId = —ç—Ç–æ—Ç Id),
    /// –æ–Ω–∏ –ø–æ–ø–∞–¥—É—Ç –≤ —ç—Ç—É –∫–æ–ª–ª–µ–∫—Ü–∏—é
    /// 
    /// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
    ///   var message = await context.Messages
    ///       .Include(m => m.Replies)
    ///           .ThenInclude(r => r.Sender)
    ///       .FirstAsync(m => m.Id == 100);
    ///   
    ///   Console.WriteLine($"{message.Replies.Count} –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ");
    /// </summary>
    public ICollection<Message> Replies { get; set; } = new List<Message>();
}

// ============================================================================
// ENUM: MESSAGE TYPE (–¢–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è)
// ============================================================================

/// <summary>
/// –¢–∏–ø —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
/// –•—Ä–∞–Ω–∏—Ç—Å—è –≤ –ë–î –∫–∞–∫ INTEGER
/// </summary>
public enum MessageType
{
    /// <summary>–û–±—ã—á–Ω–æ–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</summary>
    Text = 0,
    
    /// <summary>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (jpg, png, gif)</summary>
    Image = 1,
    
    /// <summary>–§–∞–π–ª (–¥–æ–∫—É–º–µ–Ω—Ç, –∞—Ä—Ö–∏–≤, –ª—é–±–æ–π —Ñ–∞–π–ª)</summary>
    File = 2,
    
    /// <summary>–ê—É–¥–∏–æ —Ñ–∞–π–ª (–º—É–∑—ã–∫–∞, –ø–æ–¥–∫–∞—Å—Ç)</summary>
    Audio = 3,
    
    /// <summary>–í–∏–¥–µ–æ —Ñ–∞–π–ª</summary>
    Video = 4,
    
    /// <summary>–°—Ç–∏–∫–µ—Ä</summary>
    Sticker = 5,
    
    /// <summary>–ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (–∑–∞–ø–∏—Å–∞–Ω–Ω–æ–µ –ø—Ä—è–º–æ –≤ —á–∞—Ç–µ)</summary>
    Voice = 6
}

/*
 * ============================================================================
 * –ó–ê–î–ê–ù–ò–ï –î–õ–Ø –¢–ï–ë–Ø (–ü–†–ê–ö–¢–ò–ö–ê):
 * ============================================================================
 * 
 * 1. –î–æ–±–∞–≤—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –†–ï–ê–ö–¶–ò–ô –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è (–ª–∞–π–∫–∏, —ç–º–æ–¥–∑–∏):
 *    –°–æ–∑–¥–∞–π –Ω–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É MessageReaction:
 *    - Id (int, primary key)
 *    - MessageId (int, foreign key -> Messages.Id)
 *    - UserId (int, foreign key -> Users.Id)
 *    - Emoji (string, –Ω–∞–ø—Ä–∏–º–µ—Ä "üëç", "‚ù§Ô∏è", "üòÇ")
 *    - CreatedAt (DateTime)
 *    
 *    –î–æ–±–∞–≤—å navigation property –≤ Message:
 *    public ICollection<MessageReaction> Reactions { get; set; }
 * 
 * 2. –î–æ–±–∞–≤—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –ü–ï–†–ï–°–õ–ê–ù–ù–´–• —Å–æ–æ–±—â–µ–Ω–∏–π:
 *    - ForwardedFromMessageId (int?, foreign key -> Messages.Id)
 *    - ForwardedFromUserId (int?, foreign key -> Users.Id)
 *    –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç "–ø–µ—Ä–µ—Å—ã–ª–∞—Ç—å" —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥—Ä—É–≥–æ–º—É
 * 
 * 3. –î–æ–±–∞–≤—å –ø–æ–ª–µ –¥–ª—è MENTIONS (—É–ø–æ–º–∏–Ω–∞–Ω–∏–π):
 *    - MentionedUserIds (string, —Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ JSON: "[1,5,10]")
 *    –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç @—É–ø–æ–º–∏–Ω–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
 * 
 * 4. –ü–æ–¥—É–º–∞–π –æ DELIVERY STATUS (—Å—Ç–∞—Ç—É—Å –¥–æ—Å—Ç–∞–≤–∫–∏):
 *    Enum: Sent = 0, Delivered = 1, Read = 2
 *    –°–µ–π—á–∞—Å —É –Ω–∞—Å —Ç–æ–ª—å–∫–æ IsRead, –Ω–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —Å—Ç–∞—Ç—É—Å
 * 
 * ============================================================================
 */
