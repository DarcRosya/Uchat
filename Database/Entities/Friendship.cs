/*
 * ============================================================================
 * ENTITY MODEL: FRIENDSHIP (Дружба между пользователями)
 * ============================================================================
 * 
 * Это модель для ДВУСТОРОННЕЙ дружбы.
 * 
 * WORKFLOW:
 * 1. User A отправляет запрос User B → Status = Pending
 * 2. User B принимает → Status = Accepted, создаются 2 Contact'а с IsFriend=true
 * 3. User B отклоняет → Status = Rejected
 * 
 * ============================================================================
 */

using System;
using System.ComponentModel.DataAnnotations.Schema;

namespace Database.Entities
{
public class Friendship
{
    // ========================================================================
    // PRIMARY KEY
    // ========================================================================

    public int Id { get; set; }
    
    // ========================================================================
    // FOREIGN KEYS
    // ========================================================================

    public int SenderId { get; set; }
    public int ReceiverId { get; set; }
    
    // ========================================================================
    // СТАТУС ДРУЖБЫ
    // ========================================================================

    public FriendshipStatus Status { get; set; }
    
    // ========================================================================
    // ВРЕМЕННЫЕ МЕТКИ
    // ========================================================================

    public DateTime CreatedAt { get; set; }
    public DateTime? AcceptedAt { get; set; }
    
    // ========================================================================
    // НАВИГАЦИОННЫЕ СВОЙСТВА
    // ========================================================================

    public User Sender { get; set; } = null!;
    public User Receiver { get; set; } = null!;
}

    public enum FriendshipStatus
    {
        Pending = 0, // Ожидает подтверждения
        Accepted = 1, // Дружба подтверждена (оба друзья)
        Rejected = 2, // Запрос отклонен
        Blocked = 3 // Один заблокировал другого
    }
}
